(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{"0pcE":function(t,e,r){},EUF3:function(t,e,r){"use strict";var i=r("GguQ"),o=r.n(i),a={name:"activeDetail",props:{isEdit:{type:Boolean,default:!1}},data:function(){return{editor:null,activeName:"first",ruleForm:{title:"",url:"",type:1,content:"",status:!0,num:1,id:""},rules:{title:[{required:!0,message:"请输入发布标题",trigger:"blur"},{max:30,message:"标题长度不能超过30个字符串",trigger:"blur"}],remark:[{required:!0,message:"请输入活动公告摘要",trigger:"blur"},{max:200,message:"摘要长度不能超过200个字符串",trigger:"blur"}],status:[{required:!0,message:"请选择状态",trigger:"blur"}]}}},methods:{submitForm:function(t){var e=this;this.$refs[t].validate((function(r){if(!r||!e.ruleForm.content)return e.$message.error("请确保活动公告信息填写完毕"),!1;e.$request.fetchAddActive(e.ruleForm).then((function(r){200===r.data.code?e.isEdit?e.$message.success("保存成功"):(e.resetForm(t),e.$message.success("发布成功")):e.isEdit?e.$message.error("保存失败"):e.$message.error("发布失败")}))}))},resetForm:function(t){this.$refs[t].resetFields(),this.ruleForm.cover="",this.editor.txt.clear()},tabClick:function(t){var e=this;return this.$confirm("此操作将不会保存当前填写的内容, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.ruleForm.content="",e.ruleForm.type="first"===t?1:2})).catch((function(){throw new Error("取消成功！")}))},getActiveData:function(t){var e=this;this.$request.fetchGetActive({id:t}).then((function(t){200===t.data.code?(e.ruleForm=t.data.data,1===t.data.data.type?(e.activeName="first",e.editor.txt.html(t.data.data.content)):e.activeName="second"):500===t.data.code?e.$router.go(-1):e.$message.error("数据获取失败")}))}},mounted:function(){var t=this,e=(this.$route.query.articleId,new o.a(this.$refs.editor));this.editor=e,e.customConfig.uploadImgServer=this.apiUrl+"/upload/editorUpload",e.customConfig.uploadFileName="file",e.customConfig.onchange=function(e){t.ruleForm.content=e},e.create(),this.editor.$textContainerElem.css("height","500px !important"),this.isEdit&&this.getActiveData(this.$route.query.id)},watch:{$route:{handler:function(t){t.query.id&&(this.ruleForm.id=t.query.id,this.getActiveData(t.query.id))},immediate:!0}}},n=(r("hQw5"),r("KHd+")),s=Object(n.a)(a,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("el-card",[r("el-form",{ref:"ruleForm",attrs:{model:t.ruleForm,rules:t.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"标题",prop:"title"}},[r("el-row",{attrs:{span:24}},[r("el-col",{attrs:{span:8}},[r("el-input",{model:{value:t.ruleForm.title,callback:function(e){t.$set(t.ruleForm,"title",e)},expression:"ruleForm.title"}})],1),t._v(" "),r("el-col",{attrs:{span:4}},[r("el-form-item",{attrs:{align:"left",label:"是否启用",prop:"status"}},[r("el-switch",{model:{value:t.ruleForm.status,callback:function(e){t.$set(t.ruleForm,"status",e)},expression:"ruleForm.status"}})],1)],1),t._v(" "),r("el-col",{attrs:{span:4}},[r("el-form-item",{attrs:{align:"left",label:"排序权重",prop:"weight"}},[r("el-input-number",{attrs:{min:1,label:"排序权重"},model:{value:t.ruleForm.num,callback:function(e){t.$set(t.ruleForm,"num",e)},expression:"ruleForm.num"}})],1)],1),t._v(" "),r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{align:"center"}},[t.isEdit?r("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitForm("ruleForm")}}},[t._v("保 存")]):r("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitForm("ruleForm")}}},[t._v("发 布")]),t._v(" "),r("el-button",{on:{click:function(e){return t.resetForm("ruleForm")}}},[t._v("重 置")])],1)],1)],1)],1),t._v(" "),[r("el-form-item",{staticClass:"z-editor",attrs:{label:"类型选择",prop:"status"}},[r("el-card",[r("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.tabClick("first")}}},[t._v("本 链")]),t._v(" "),r("el-button",{attrs:{type:"success"},on:{click:function(e){return t.tabClick("second")}}},[t._v("外 链")])],1),t._v(" "),r("el-card",[r("div",{ref:"editor",class:1===t.ruleForm.type?"show":"hidden"}),t._v(" "),r("el-input",{class:2===t.ruleForm.type?"show":"hidden",attrs:{placeholder:"请输入外链地址"},model:{value:t.ruleForm.content,callback:function(e){t.$set(t.ruleForm,"content",e)},expression:"ruleForm.content"}})],1)],1)]],2)],1)],1)}),[],!1,null,"ab34a7f2",null);e.a=s.exports},hQw5:function(t,e,r){"use strict";var i=r("0pcE");r.n(i).a},vKC3:function(t,e,r){"use strict";r.r(e);var i={name:"activeAdd",components:{activeDetail:r("EUF3").a},data:function(){return{id:void 0}},methods:{},mounted:function(){}},o=r("KHd+"),a=Object(o.a)(i,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("active-detail",{attrs:{"is-edit":!0}})],1)}),[],!1,null,"24184012",null);e.default=a.exports}}]);
//# sourceMappingURL=20.af949189d712ff55965f.js.map