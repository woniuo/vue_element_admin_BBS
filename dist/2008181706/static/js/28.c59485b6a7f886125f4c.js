(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{"3Vu3":function(e,t,a){"use strict";a.r(t);var r=a("gDS+"),n=a.n(r),o={name:"reportType",data:function(){return{dynamicValidateForm:{report:[]},lastReport:[],reportPage:{name:"",page:1,pageSize:20}}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;var a=t.dynamicValidateForm.report.concat(t.lastReport);a.forEach((function(e,t){e.orderNum=t})),t.$request.fetchAddUpReportType({jsonArrStr:n()(a)}).then((function(e){200===e.data.code?t.$message.success("保存成功"):t.$message.error("保存失败")}))}))},resetForm:function(e){this.$refs[e].resetFields(),this.dynamicValidateForm.report.forEach((function(e){e.name=""}))},removeDomain:function(e){var t=this;this.$request.fetchDelReportType({id:e.id}).then((function(a){if(200===a.data.code){var r=t.dynamicValidateForm.report.indexOf(e);-1!==r&&t.dynamicValidateForm.report.splice(r,1),t.$message.success("删除成功")}else t.$message.error("删除失败")}))},addDomain:function(){this.dynamicValidateForm.report.push({name:"",id:"",orderNum:null})},getReport:function(e){var t=this;this.$request.fetchGetReportType(e).then((function(e){200===e.data.code?(t.dynamicValidateForm.report=e.data.data.splice(0,e.data.data.length-1),t.lastReport=e.data.data.splice(-1)):t.$message.error("数据加载失败")}))}},mounted:function(){this.getReport(this.reportPage)}},i=(a("ESyL"),a("KHd+")),s=Object(i.a)(o,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-card",[a("el-form",{ref:"dynamicValidateForm",staticClass:"demo-dynamic",attrs:{model:e.dynamicValidateForm,"label-width":"100px"}},[e._l(e.dynamicValidateForm.report,(function(t,r){return a("el-form-item",{key:r+Date.now(),attrs:{label:"类型",prop:"report."+r+".name",rules:{required:!0,message:"类型名称不能为空",trigger:"blur"}}},[a("el-input",{staticClass:"w400",attrs:{clearable:"",maxlength:"15","show-word-limit":""},on:{change:function(t){return e.$forceUpdate()}},model:{value:t.name,callback:function(a){e.$set(t,"name",a)},expression:"item.name"}}),e._v(" "),a("el-button",{directives:[{name:"role-btn",rawName:"v-role-btn",value:"121",expression:"'121'"}],attrs:{type:"danger"},on:{click:function(a){return a.preventDefault(),e.removeDomain(t)}}},[e._v("删除")])],1)})),e._v(" "),e.lastReport&&e.lastReport.length>0?a("el-form-item",{attrs:{label:e.lastReport[0].name}},[a("el-input",{staticClass:"w400",attrs:{disabled:!0},model:{value:e.lastReport[0].name,callback:function(t){e.$set(e.lastReport[0],"name",t)},expression:"lastReport[0].name"}})],1):e._e(),e._v(" "),a("el-form-item",[a("el-button",{directives:[{name:"role-btn",rawName:"v-role-btn",value:"119",expression:"'119'"}],attrs:{type:"primary"},on:{click:function(t){return e.submitForm("dynamicValidateForm")}}},[e._v("提交")]),e._v(" "),a("el-button",{directives:[{name:"role-btn",rawName:"v-role-btn",value:"120",expression:"'120'"}],on:{click:e.addDomain}},[e._v("新增类型")]),e._v(" "),a("el-button",{on:{click:function(t){return e.resetForm("dynamicValidateForm")}}},[e._v("重置")])],1)],2)],1)],1)}),[],!1,null,"388efc88",null);t.default=s.exports},Cm6Z:function(e,t,a){},ESyL:function(e,t,a){"use strict";var r=a("Cm6Z");a.n(r).a}}]);
//# sourceMappingURL=28.c59485b6a7f886125f4c.js.map