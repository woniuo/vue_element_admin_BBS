(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{EJpd:function(e,t,a){"use strict";var n=a("zaJQ");a.n(n).a},czZD:function(e,t,a){"use strict";a.r(t);var n={name:"integralManage",data:function(){return{num:0,integralData:[],tableData:[{id:1,bonusDay:1,bonusIntegral:20,bonusExp:30}],dialogVisible:!1,signTitle:"",ruleForm:{id:null,bonusDay:0,bonusIntegral:0,bonusExp:0},rules:{bonusDay:[{required:!0,message:"请输入累计天数",trigger:"change"}],bonusIntegral:[{required:!0,message:"请输入增加积分",trigger:"change"}],bonusExp:[{required:!0,message:"请输入增加经验值",trigger:"change"}]}}},methods:{save:function(e,t){var a=this;this.$request.fetchSetIntegray(this.integralData[e]).then((function(e){200===e.data.code?a.$message.success("修改成功"):a.$message.error("修改失败")}))},getList:function(){var e=this;this.$request.fetchGetIntegrayList().then((function(t){200===t.data.code?e.integralData=t.data.data:e.$message.error("数据加载失败")}))},handleClose:function(e){e()},addSignConfig:function(){this.signTitle="新增",this.dialogVisible=!0},editSignConfig:function(e,t){this.signTitle="修改",this.getSignConfig(t),this.dialogVisible=!0},delSignConfig:function(e,t){var a=this;this.$request.fetchDelSignConfig({id:t}).then((function(t){200===t.data.code?(a.tableData.splice(e,1),a.$message.success("删除成功")):a.$message.error("删除失败")})),console.log(t)},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;t.$request.fetchAddSignConfig(t.ruleForm).then((function(e){200===e.data.code?(t.$message.success(t.signTitle+"成功"),t.getSignConfigList(),t.dialogVisible=!1):t.$message.error(t.signTitle+"失败")}))}))},resetForm:function(e){this.$refs[e].resetFields()},getSignConfig:function(e){var t=this;this.$request.fetchGetSignConfig({id:e}).then((function(e){200===e.data.code?t.ruleForm=e.data.data:t.$message.error("签到配置数据获取失败")}))},getSignConfigList:function(e){var t=this;this.$request.fetchGetSignConfigList({id:e}).then((function(e){200===e.data.code?t.tableData=e.data.data:t.$message.error("签到配置数据获取失败")}))}},mounted:function(){this.getList(),this.getSignConfigList()}},i=(a("EJpd"),a("KHd+")),s=Object(i.a)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.integralData.length>0?a("el-row",{staticClass:"animate__animated animate__fadeInDown",attrs:{span:24,gutter:20}},e._l(e.integralData,(function(t,n){return a("el-col",{key:t.id,attrs:{span:6}},[a("el-card",[a("el-row",{staticClass:"mg10"},[a("el-col",{attrs:{align:"center",span:24}},[0===n?a("el-card",{staticClass:"itm uplike"},[e._v(e._s(t.taskName))]):1===n?a("el-card",{staticClass:"itm comment"},[e._v(e._s(t.taskName))]):2===n?a("el-card",{staticClass:"itm publish"},[e._v(e._s(t.taskName))]):3===n?a("el-card",{staticClass:"itm sign"},[e._v(e._s(t.taskName))]):e._e()],1),e._v(" "),a("el-col",{staticClass:"mg10"},[a("el-card",[e._v("\n              一次增加经验值:\n              "),a("el-input-number",{attrs:{min:0,label:"增加经验值"},model:{value:t.finishExp,callback:function(a){e.$set(t,"finishExp",a)},expression:"item.finishExp"}})],1)],1),e._v(" "),a("el-col",{staticClass:"mg10"},[a("el-card",[e._v("\n              一次增加积分值:\n              "),a("el-input-number",{attrs:{min:0,label:"增加积分值"},model:{value:t.finishIntegral,callback:function(a){e.$set(t,"finishIntegral",a)},expression:"item.finishIntegral"}})],1)],1),e._v(" "),a("el-col",{staticClass:"mg10"},[a("el-card",[e._v("\n              一天最高获取次数:\n              "),a("el-input-number",{attrs:{min:0,label:"一天最高获取次数"},model:{value:t.dayTimes,callback:function(a){e.$set(t,"dayTimes",a)},expression:"item.dayTimes"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{align:"right"}},[a("el-button",{directives:[{name:"role-btn",rawName:"v-role-btn",value:"147",expression:"'147'"}],attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.save(n,t.id)}}},[e._v("保 存")])],1)],1)],1)],1)})),1):e._e(),e._v(" "),a("el-row",{staticClass:"animate__animated animate__fadeInLeft"},[a("el-col",{attrs:{span:24}},[a("el-card",{staticClass:"sign-title"},[a("el-row",[a("el-col",{attrs:{span:12}},[e._v("签到扩展配置")]),e._v(" "),a("el-col",{attrs:{span:12,align:"right"}},[a("el-button",{directives:[{name:"role-btn",rawName:"v-role-btn",value:"148",expression:"'148'"}],attrs:{type:"primary"},on:{click:e.addSignConfig}},[e._v("新 增")])],1)],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("el-card",[[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{prop:"id",label:"ID",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"bonusDay",label:"累计签到天数",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:"primary"}},[e._v(e._s(t.row.bonusDay)+" 天")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"bonusIntegral",label:"累计签到获取的积分",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:"primary"}},[e._v(e._s(t.row.bonusIntegral))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"bonusExp",label:"累计签到获取的经验",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:"primary"}},[e._v(e._s(t.row.bonusExp))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"role-btn",rawName:"v-role-btn",value:"149",expression:"'149'"}],attrs:{type:"primary",size:"small"},on:{click:function(a){return e.editSignConfig(t.$index,t.row.id)}}},[e._v("编辑")]),e._v(" "),a("el-button",{directives:[{name:"role-btn",rawName:"v-role-btn",value:"150",expression:"'150'"}],attrs:{type:"danger",size:"small"},on:{click:function(a){return e.delSignConfig(t.$index,t.row.id)}}},[e._v("删除")])]}}])})],1)]],2)],1)],1),e._v(" "),[a("el-dialog",{attrs:{title:e.signTitle,visible:e.dialogVisible,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"150px"}},[a("el-form-item",{attrs:{label:"累计签到天数",prop:"bonusDay"}},[a("el-input-number",{attrs:{min:1,max:365,precision:0,label:"一天最高获取次数"},model:{value:e.ruleForm.bonusDay,callback:function(t){e.$set(e.ruleForm,"bonusDay",t)},expression:"ruleForm.bonusDay"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"累计签到获取的积分",prop:"bonusIntegral"}},[a("el-input-number",{attrs:{min:0,label:"累计签到获取的积分"},model:{value:e.ruleForm.bonusIntegral,callback:function(t){e.$set(e.ruleForm,"bonusIntegral",t)},expression:"ruleForm.bonusIntegral"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"累计签到获取的经验",prop:"bonusExp"}},[a("el-input-number",{attrs:{min:0,label:"累计签到获取的经验"},model:{value:e.ruleForm.bonusExp,callback:function(t){e.$set(e.ruleForm,"bonusExp",t)},expression:"ruleForm.bonusExp"}})],1),e._v(" "),a("el-form-item",{attrs:{align:"right"}},[a("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("重 置")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("确 定")])],1)],1)],1)]],2)}),[],!1,null,"24a3aa16",null);t.default=s.exports},zaJQ:function(e,t,a){}}]);
//# sourceMappingURL=32.5d9a59af8134bea89bff.js.map