(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"+VW3":function(e,r,t){"use strict";t.r(r);var a={name:"adEdit",components:{adDetail:t("3goY").a},data:function(){return{}},methods:{}},s=t("KHd+"),o=Object(s.a)(a,(function(){var e=this.$createElement,r=this._self._c||e;return r("div",[r("ad-detail",{attrs:{"is-edit":!0}})],1)}),[],!1,null,"0574e850",null);r.default=o.exports},"3goY":function(e,r,t){"use strict";var a=t("4d7F"),s=t.n(a),o=t("YEIV"),l=t.n(o),i={name:"adDetail",props:{isEdit:{type:Boolean,default:!1}},data:function(){var e;return{progressFlag:!1,progressPercent:0,ruleForm:(e={id:void 0,title:"",adImg:"",adPeopleName:"",status:!0},l()(e,"id",null),l()(e,"adLink",""),l()(e,"startTime",""),l()(e,"stopTime",""),l()(e,"allTime",""),l()(e,"money",0),e),rules:{title:[{required:!0,message:"请输入广告名称",trigger:"blur"},{min:3,max:20,message:"长度在 3 到 20 个字符",trigger:"blur"}],money:[{required:!0,message:"投放金额不能为空",trigger:"change"}],status:[{required:!0,message:"投放状态必须要有",trigger:"change"}],adPeopleName:[{required:!0,message:"请输入投放人昵称",trigger:"blur"},{max:10,message:"长度不能超过10个字符串",trigger:"blur"}],adLink:[{required:!0,message:"请输入广告投放链接",trigger:"blur"}],adImg:[{required:!0,message:"广告封面图不能为空",trigger:"blur"}],startTime:[{required:!0,message:"投放起始时间不能为空",trigger:"blur"}],stopTime:[{required:!0,message:"投放终止时间不能为空",trigger:"blur"}]}}},methods:{submitForm:function(e){var r=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;var t=new Date(r.ruleForm.startTime),a=new Date(r.ruleForm.stopTime);r.ruleForm.allTime=Math.floor((a-t)/1e3/60/60/24),r.$request.fetchAddAd(r.ruleForm).then((function(e){200===e.data.code?r.isEdit?r.$message.success("保存成功"):r.$message.success("新增成功"):r.isEdit?r.$message.error("保存失败"):r.$message.error("新增失败")}))}))},resetForm:function(e){this.$refs[e].resetFields()},handleAvatarSuccess:function(e,r){var t=this;this.ruleForm.adImg=e.msg,this.progressPercent=100,setTimeout((function(){t.progressFlag=!1}),1e3)},beforeAvatarUpload:function(e){var r=this;return this.progressFlag=!1,new s.a((function(r,t){var a=window.URL||window.webkitURL,s=new Image;s.onload=function(){s.width>=100&&s.height>=100?r():t()},s.src=a.createObjectURL(e)})).then((function(){return e}),(function(){return r.$message.error("上传的封面图必须是等于或大于250*400!"),s.a.reject()}))},uploadFileProcess:function(e,r,t){var a=this;t.forEach((function(e){100===e.percentage||(a.progressFlag=!0,a.progressPercent=Math.abs(e.percentage.toFixed(0)))}))},getAdData:function(e){var r=this;this.isEdit&&this.$request.fetchGetAd({id:e}).then((function(e){200===e.data.code?r.ruleForm=e.data.data:500===e.data.code?r.$router.go(-1):r.$message.error("数据加载失败")}))}},mounted:function(){this.isEdit&&this.getAdData(this.$route.query.id)},watch:{$route:{handler:function(e){e&&this.getAdData(this.$route.query.id)},deep:!0}}},n=(t("ehRl"),t("KHd+")),u=Object(n.a)(i,(function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",[t("el-card",[t("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"广告名称",prop:"title"}},[t("el-row",[t("el-col",{attrs:{span:6}},[t("el-input",{attrs:{placeholder:"请输入广告名称",maxlength:"20",minlength:"3","show-word-limit":""},model:{value:e.ruleForm.title,callback:function(r){e.$set(e.ruleForm,"title",r)},expression:"ruleForm.title"}})],1)],1)],1),e._v(" "),t("el-form-item",{attrs:{label:"投放链接",prop:"adLink"}},[t("el-row",[t("el-col",{attrs:{span:10}},[t("el-input",{attrs:{placeholder:"请输入广告链接"},model:{value:e.ruleForm.adLink,callback:function(r){e.$set(e.ruleForm,"adLink",r)},expression:"ruleForm.adLink"}})],1)],1)],1),e._v(" "),t("el-form-item",{attrs:{label:"投放时间",required:""}},[t("el-row",{attrs:{span:8}},[t("el-col",{attrs:{span:3}},[t("el-form-item",{attrs:{label:"",required:"",prop:"startTime"}},[t("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime",placeholder:"选择日期时间"},model:{value:e.ruleForm.startTime,callback:function(r){e.$set(e.ruleForm,"startTime",r)},expression:"ruleForm.startTime"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:2,align:"center"}},[e._v("至")]),e._v(" "),t("el-col",{attrs:{span:3}},[t("el-form-item",{attrs:{label:"",required:"",prop:"stopTime"}},[t("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime",placeholder:"选择日期时间"},model:{value:e.ruleForm.stopTime,callback:function(r){e.$set(e.ruleForm,"stopTime",r)},expression:"ruleForm.stopTime"}})],1)],1)],1)],1),e._v(" "),t("el-form-item",{attrs:{label:"投放金额",prop:"money"}},[t("el-input-number",{attrs:{min:0,max:1e10,label:"投放金额"},model:{value:e.ruleForm.money,callback:function(r){e.$set(e.ruleForm,"money",r)},expression:"ruleForm.money"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"投放状态",prop:"status"}},[t("el-switch",{model:{value:e.ruleForm.status,callback:function(r){e.$set(e.ruleForm,"status",r)},expression:"ruleForm.status"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"投放人昵称",prop:"adPeopleName"}},[t("el-row",[t("el-col",{attrs:{span:6}},[t("el-input",{model:{value:e.ruleForm.adPeopleName,callback:function(r){e.$set(e.ruleForm,"adPeopleName",r)},expression:"ruleForm.adPeopleName"}})],1)],1)],1),e._v(" "),t("el-form-item",{attrs:{label:"封面图",prop:"adImg"}},[t("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.apiUrl+"/upload/uploadFile","show-file-list":!1,"on-success":e.handleAvatarSuccess,"on-progress":e.uploadFileProcess,"before-upload":e.beforeAvatarUpload}},[e.ruleForm.adImg?t("img",{staticClass:"avatar",attrs:{src:e.ruleForm.adImg}}):t("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),e._v(" "),t("span",{staticClass:"up-desc"},[e._v("说明: 上传图片大小不能超过20M,大小不能小于 250*400 像素")]),e._v(" "),e.progressFlag?t("div",{staticClass:"progress-box"},[t("el-progress",{attrs:{percentage:e.progressPercent}})],1):e._e()],1),e._v(" "),t("el-form-item",[e.isEdit?t("el-button",{attrs:{type:"primary"},on:{click:function(r){return e.submitForm("ruleForm")}}},[e._v("保 存")]):t("el-button",{attrs:{type:"primary"},on:{click:function(r){return e.submitForm("ruleForm")}}},[e._v("发 布")]),e._v(" "),t("el-button",{on:{click:function(r){return e.resetForm("ruleForm")}}},[e._v("重置")])],1)],1)],1)],1)}),[],!1,null,"c45d44b6",null);r.a=u.exports},"5tvL":function(e,r,t){},"RU/L":function(e,r,t){t("Rqdy");var a=t("WEpk").Object;e.exports=function(e,r,t){return a.defineProperty(e,r,t)}},Rqdy:function(e,r,t){var a=t("Y7ZC");a(a.S+a.F*!t("jmDH"),"Object",{defineProperty:t("2faE").f})},SEkw:function(e,r,t){e.exports={default:t("RU/L"),__esModule:!0}},YEIV:function(e,r,t){"use strict";r.__esModule=!0;var a,s=t("SEkw"),o=(a=s)&&a.__esModule?a:{default:a};r.default=function(e,r,t){return r in e?(0,o.default)(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}},ehRl:function(e,r,t){"use strict";var a=t("5tvL");t.n(a).a}}]);
//# sourceMappingURL=5.825d204f2e453bdbdd3a.js.map