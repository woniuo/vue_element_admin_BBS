(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{Ns00:function(t,e,a){"use strict";var n=a("y/03");a.n(n).a},"RU/L":function(t,e,a){a("Rqdy");var n=a("WEpk").Object;t.exports=function(t,e,a){return n.defineProperty(t,e,a)}},Rqdy:function(t,e,a){var n=a("Y7ZC");n(n.S+n.F*!a("jmDH"),"Object",{defineProperty:a("2faE").f})},SEkw:function(t,e,a){t.exports={default:a("RU/L"),__esModule:!0}},YEIV:function(t,e,a){"use strict";e.__esModule=!0;var n,s=a("SEkw"),l=(n=s)&&n.__esModule?n:{default:n};e.default=function(t,e,a){return e in t?(0,l.default)(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}},aUhE:function(t,e,a){"use strict";a.r(e);var n=a("YEIV"),s=a.n(n)()({name:"storyList",data:function(){return{radio:1,visibleList:[],tableData:[],multipleSelection:[],emptyText:"加载中...",searchPage:{userId:"",page:1,pageSize:10,searchText:""},totalCount:0,totalPage:0,columnData:[],columnPage:{page:1,pageSize:10}}},methods:{handleDelete:function(t,e){var a=this;this.$request.fetchDelStory({storyId:[e]}).then((function(e){200===e.data.code?(a.tableData.splice(t,1),a.$message.success("删除成功"),0===a.tableData.length&&(a.searchPage.page--,a.getList(a.searchPage))):a.$message.error("删除失败")}))},filterColumn:function(t,e){return e.columnName===t},filterStatus:function(t,e){return e.approvalStatus===t},handleSelectionChange:function(t){var e=[];t.forEach((function(t){e.push(t.id)})),this.multipleSelection=e},handleSizeChange:function(t){this.searchPage.pageSize=t,this.getList(this.searchPage)},handleCurrentChange:function(t){this.searchPage.page=t,this.getList(this.searchPage)},onSubmit:function(){this.getList(this.searchPage)},setStatus:function(t,e){var a=this;this.$request.fetchSetStoryStatus({approvalResult:parseInt(this.radio),id:[e]}).then((function(e){200===e.data.code?(a.$set(a.tableData[t],"approvalStatus",a.radio+1),a.$message.success("修改成功")):a.$message.error(e.data.msg)}))},setStatusAll:function(t){var e=this;this.$confirm("您勾选的确定全部审核通过吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$request.fetchSetStoryStatus({approvalResult:t,id:e.multipleSelection}).then((function(t){200===t.data.code?(e.getList(e.searchPage),e.$message({type:"success",message:"操作成功!"})):e.$message.error(t.data.msg),e.$set(e.visibleList,index,!1),e.radio=1}))})).catch((function(){e.$message({type:"info",message:"已取消操作"})}))},delStatusAll:function(){var t=this;this.$confirm("您勾选的确定全部删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$request.fetchDelStory({storyId:t.multipleSelection}).then((function(e){200===e.data.code?(t.getList(t.searchPage),t.$message({type:"success",message:"批量删除成功!"})):t.$message.error("删除失败")}))})).catch((function(){t.$message({type:"info",message:"已取消操作"})}))},cancelDelete:function(t){this.$set(this.visibleList,t,!1),this.radio=1},getList:function(t){var e=this;this.$request.fetchGetStoryList(t).then((function(t){200===t.data.code?(e.tableData=t.data.data.list,e.searchPage.page=t.data.data.currPage,e.totalCount=t.data.data.totalCount,e.totalPage=t.data.data.totalPage):e.$message.error("数据获取失败"),e.emptyText="暂无数据"}))},getColumn:function(t){var e=this;this.$request.fetchColumnList(t).then((function(t){200===t.data.code&&t.data.data.list.forEach((function(t){var a={text:"",value:""};a.text=t.name,a.value=t.name,e.columnData.push(a)}))}))}},mounted:function(){this.getList(this.searchPage),this.getColumn(this.columnPage)},watch:{multipleSelection:function(t){}}},"watch",{"searchPage.searchText":{handler:function(t){0===t.length&&(this.searchPage.page=1,this.getList(this.searchPage))}}}),l=(a("Ns00"),a("KHd+")),i=Object(l.a)(s,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[[a("el-card",[a("el-row",{attrs:{span:24}},[a("el-col",{attrs:{span:12}},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.searchPage}},[a("el-form-item",{attrs:{label:"故事查询"}},[a("el-input",{attrs:{placeholder:"请输入故事标题查询"},model:{value:t.searchPage.searchText,callback:function(e){t.$set(t.searchPage,"searchText",e)},expression:"searchPage.searchText"}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("查询")])],1)],1)],1),t._v(" "),t.multipleSelection.length>0?a("el-col",{attrs:{span:12,align:"right"}},[a("el-button",{directives:[{name:"role-btn",rawName:"v-role-btn",value:"63",expression:"'63'"}],attrs:{type:"success"},on:{click:function(e){return t.setStatusAll(1)}}},[t._v("批量审核通过")]),t._v(" "),a("el-button",{directives:[{name:"role-btn",rawName:"v-role-btn",value:"63",expression:"'63'"}],attrs:{type:"primary"},on:{click:function(e){return t.setStatusAll(2)}}},[t._v("批量审核不通过")]),t._v(" "),a("el-button",{directives:[{name:"role-btn",rawName:"v-role-btn",value:"64",expression:"'64'"}],attrs:{type:"danger"},on:{click:t.delStatusAll}},[t._v("批量删除")])],1):t._e()],1)],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,"empty-text":t.emptyText},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),a("el-table-column",{attrs:{label:"ID",width:"60",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(e.row.id))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"标题",align:"center",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"out-dot"},[t._v(t._s(e.row.title))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"作者",align:"center",width:"150",prop:"nickname"}}),t._v(" "),a("el-table-column",{attrs:{prop:"columnName",label:"所属专栏",filters:t.columnData,"filter-method":t.filterColumn,"filter-placement":"bottom-end",width:"150",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{type:"success","disable-transitions":""}},[t._v(t._s(e.row.columnName))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"评论数",width:"100",prop:"cmtCount",sortable:"",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"顶/踩数",width:"200",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{"disable-transitions":""}},[a("i",{staticClass:"fa fa-thumbs-o-up",attrs:{"aria-hidden":"true"}}),t._v("\n            "+t._s(e.row.upCount)+"\n          ")]),t._v(" "),a("el-tag",{attrs:{"disable-transitions":""}},[a("i",{staticClass:"fa fa-hand-o-down",attrs:{"aria-hidden":"true"}}),t._v("\n            "+t._s(e.row.stepCount)+"\n          ")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"浏览次数",width:"100",prop:"browseCount",align:"center",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{label:"发布时间",width:"200",prop:"createTime",align:"center",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{label:"审核状态",filters:[{text:"审核中",value:1},{text:"审核通过",value:2},{text:"审核未通过",value:3}],"filter-method":t.filterStatus,"filter-placement":"bottom-end",width:"150",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[1===e.row.approvalStatus?a("el-tag",[t._v("审核中")]):2===e.row.approvalStatus?a("el-tag",{attrs:{type:"success"}},[t._v("审核通过")]):a("el-tag",{attrs:{type:"danger"}},[t._v("审核不通过")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{directives:[{name:"role-btn",rawName:"v-role-btn",value:"62",expression:"'62'"}],attrs:{size:"mini"}},[a("el-link",{attrs:{href:t.httpUrl+"/gushi.html?id="+e.row.id,target:"_blank"}},[t._v("查看")])],1),t._v(" "),a("el-popover",{attrs:{placement:"top",width:"150",trigger:"click"},model:{value:t.visibleList[e.$index],callback:function(a){t.$set(t.visibleList,e.$index,a)},expression:"visibleList[scope.$index]"}},[[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-radio-group",{model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[a("el-radio",{attrs:{label:1}},[t._v("通过")]),t._v(" "),a("el-radio",{attrs:{label:2}},[t._v("不通过")])],1)],1)],1),t._v(" "),a("el-row",{staticClass:"mt10",attrs:{justify:"center"}},[a("el-col",{attrs:{span:12}},[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return t.cancelDelete(e.$index)}}},[t._v("取消")])],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return t.setStatus(e.$index,e.row.id)}}},[t._v("确定")])],1)],1)],t._v(" "),a("el-button",{directives:[{name:"role-btn",rawName:"v-role-btn",value:"63",expression:"'63'"}],attrs:{slot:"reference",size:"mini"},slot:"reference"},[t._v("状态修改")])],2),t._v(" "),a("el-button",{directives:[{name:"role-btn",rawName:"v-role-btn",value:"64",expression:"'64'"}],attrs:{size:"mini",type:"danger"},on:{click:function(a){return t.handleDelete(e.$index,e.row.id)}}},[a("i",{staticClass:"el-icon-delete"}),t._v("删除\n          ")])]}}])})],1)],t._v(" "),[a("el-card",[a("el-pagination",{attrs:{"page-size":t.searchPage.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.totalCount,"prev-text":"上一页","next-text":"下一页"},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)]],2)}),[],!1,null,"1cbab26c",null);e.default=i.exports},"y/03":function(t,e,a){}}]);
//# sourceMappingURL=9.114e98c2b1755cc11162.js.map